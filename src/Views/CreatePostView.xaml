<UserControl x:Class="VRCGroupTools.Views.CreatePostView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Margin="0,0,0,10" VerticalAlignment="Center">
            <Button Content="Load Roles" Command="{Binding LoadRolesCommand}"
                    Style="{StaticResource MaterialDesignOutlinedButton}" Height="32" Width="100"/>
            <TextBlock Text="{Binding Status}" Foreground="#7C4DFF" Margin="10,6,0,0"/>
        </StackPanel>

        <Border Grid.Row="1" Background="#1f1f1f" Padding="12" CornerRadius="6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Vertical">
                    <TextBlock Text="Create Group Post" FontSize="18" FontWeight="SemiBold" Foreground="White"/>
                    <TextBox Text="{Binding Title, UpdateSourceTrigger=PropertyChanged}"
                             materialDesign:HintAssist.Hint="Title"
                             Style="{StaticResource MaterialDesignFilledTextBox}"
                             Foreground="White" CaretBrush="White"/>
                    <TextBox Text="{Binding Text, UpdateSourceTrigger=PropertyChanged}"
                             materialDesign:HintAssist.Hint="Text"
                             Style="{StaticResource MaterialDesignFilledTextBox}"
                             Foreground="White" CaretBrush="White"
                             AcceptsReturn="True"
                             TextWrapping="Wrap"
                             Height="160"/>
                    <StackPanel Orientation="Horizontal">
                        <ComboBox ItemsSource="{Binding Visibilities}"
                                  SelectedItem="{Binding Visibility}"
                                  Width="140"
                                  Style="{StaticResource MaterialDesignFilledComboBox}"
                                  Foreground="White"/>
                        <CheckBox Content="Send Notification" IsChecked="{Binding SendNotification}"
                                  Foreground="White"/>
                    </StackPanel>
                    <Button Content="Create Post" Command="{Binding CreateCommand}"
                            Style="{StaticResource MaterialDesignRaisedButton}" Height="36" Width="140"/>
                </StackPanel>
                <StackPanel Grid.Column="1" Orientation="Vertical">
                    <TextBlock Text="Restrict to Roles" Foreground="#aaa" FontSize="12"/>
                    <ItemsControl ItemsSource="{Binding AvailableRoles}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <CheckBox Content="{Binding}" Foreground="White"
                                          Command="{Binding DataContext.ToggleRoleCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                          CommandParameter="{Binding}">
                                    <CheckBox.IsChecked>
                                        <MultiBinding Converter="{StaticResource CollectionContainsConverter}">
                                            <Binding Path="DataContext.SelectedRoles" RelativeSource="{RelativeSource AncestorType=UserControl}"/>
                                            <Binding/>
                                        </MultiBinding>
                                    </CheckBox.IsChecked>
                                </CheckBox>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>
